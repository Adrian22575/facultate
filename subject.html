<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Materia</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">

  <!-- IMPORTANT: dacÄƒ styles.css e Ã®n root -->
  <link rel="stylesheet" href="assets/styles.css">
</head>
<body>
  <div class="container">
    <a class="btn-back" href="index.html">ÃŽnapoi la meniu</a>

    <h1 id="pageTitle">Materia</h1>
    <p class="description" style="text-align:center;">Alege modul:</p>

    <div class="menu-buttons" id="modeLinks"></div>
  </div>

  <script>
    function getParam(name) {
      return new URLSearchParams(location.search).get(name);
    }

    async function init() {
      const subjectId = getParam("subject");
      if (!subjectId) throw new Error("LipseÈ™te parametrul ?subject=");

      const res = await fetch("data/subjects.json", { cache: "no-store" });
      if (!res.ok) throw new Error("Nu pot Ã®ncÄƒrca data/subjects.json");

      const data = await res.json();
      const subject = (data.subjects || []).find(s => s.id === subjectId);
      if (!subject) throw new Error("Materia nu existÄƒ Ã®n subjects.json: " + subjectId);

      document.title = subject.title;
      document.getElementById("pageTitle").textContent = subject.title;

      const q = encodeURIComponent(subjectId);
      document.getElementById("modeLinks").innerHTML = `
        <a class="test-link" href="interactive.html?subject=${q}">ðŸ§© Modul Interactiv</a>
        <a class="test-link" href="study.html?subject=${q}">ðŸ“– StudiazÄƒ</a>
        <a class="test-link" href="test.html?subject=${q}">ðŸŽ¯ Test</a>
      `;
    }

    init().catch(err => {
      console.error(err);
      document.getElementById("pageTitle").textContent = "Eroare";
      document.getElementById("modeLinks").innerHTML =
        `<div style="color:#b00020; text-align:center; font-weight:700;">${err.message}</div>`;
    });
  </script>
</body>
</html>
